<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç»™é»„æ³½é’°å‡†å¤‡çš„å°çª</title>
  <style>
    body {
      margin: 0;
      font-family: "Microsoft YaHei", sans-serif;
      background: linear-gradient(120deg, #ffd1dc, #fff1f7);
      color: #5a2a2a;
    }

    .center {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    button {
      padding: 12px 28px;
      font-size: 18px;
      border-radius: 30px;
      border: none;
      background: #ff8fab;
      color: white;
      cursor: pointer;
      margin: 10px;
    }

    button:hover {
      background: #ff6f91;
    }

    .hidden {
      display: none;
    }

    .menu button {
      width: 200px;
    }

    textarea {
      width: 80%;
      height: 100px;
      border-radius: 10px;
      border: none;
      padding: 10px;
      font-size: 16px;
    }

    .music-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.8);
      padding: 10px;
      border-radius: 15px;
    }

    .music-player button {
      padding: 5px 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>

<!-- ğŸ€ å°é¢ -->
<div id="cover" class="center">
  <h1>ç»™é»„æ³½é’°å‡†å¤‡çš„å°çª</h1>
  <button onclick="enterHome()">ç‚¹æˆ‘è¿›å»</button>
</div>

<!-- ğŸ  ä¸»ç•Œé¢ -->
<div id="home" class="center hidden">
  <div class="menu">
    <button onclick="showSection('past')">è¿‡å¾€</button>
    <button onclick="showSection('now')">æ­¤åˆ»å¿ƒæƒ…</button>
    <button onclick="showSection('miss')">æˆ‘æƒ³ä½ äº†</button>
  </div>
</div>

<!-- ğŸ“œ è¿‡å¾€ -->
<div id="past" class="center hidden">
  <h2>è¿‡å¾€</h2>
  <div id="pastList"></div>
  <button onclick="backHome()">è¿”å›</button>
</div>

<!-- âœï¸ æ­¤åˆ»å¿ƒæƒ… -->
<div id="now" class="center hidden">
  <h2>æ­¤åˆ»å¿ƒæƒ…</h2>
  <textarea id="moodInput" placeholder="å†™ä¸‹æ­¤åˆ»çš„å¿ƒæƒ…å§â€¦"></textarea>
  <br>
  <button onclick="saveMood()">ä¿å­˜</button>
  <button onclick="backHome()">è¿”å›</button>
</div>

<!-- â¤ï¸ æˆ‘æƒ³ä½ äº† -->
<div id="miss" class="center hidden">
  <h2>æˆ‘æƒ³ä½ äº†</h2>
  <p style="font-size:20px;">ç›´æ¥æ‰¾æˆ‘ï¼Œæˆ‘ä¸€ç›´éƒ½åœ¨</p>
  <button onclick="backHome()">è¿”å›</button>
</div>

<!-- ğŸµ éŸ³ä¹æ’­æ”¾å™¨ -->
<div class="music-player">
  <button onclick="prevSong()">â®</button>
  <button onclick="togglePlay()">â¯</button>
  <button onclick="nextSong()">â­</button>
  <br>
  <input type="range" min="0" max="1" step="0.01" onchange="setVolume(this.value)">
</div>

<audio id="audio" autoplay></audio>

<script>
  const sections = ["cover", "home", "past", "now", "miss"];

  function show(id) {
    sections.forEach(s => {
      document.getElementById(s).classList.add("hidden");
    });
    document.getElementById(id).classList.remove("hidden");
  }

  function enterHome() {
    show("home");
  }

  function backHome() {
    show("home");
  }

  function showSection(id) {
    if (id === "past") loadPast();
    show(id);
  }

  function saveMood() {
    const text = document.getElementById("moodInput").value;
    if (!text) return;
    const list = JSON.parse(localStorage.getItem("moods") || "[]");
    list.unshift({ text, time: new Date().toLocaleString() });
    localStorage.setItem("moods", JSON.stringify(list));
    document.getElementById("moodInput").value = "";
    alert("å·²ä¿å­˜");
  }

  function loadPast() {
    const list = JSON.parse(localStorage.getItem("moods") || "[]");
    const div = document.getElementById("pastList");
    div.innerHTML = list.map(m =>
      `<p>ğŸ•° ${m.time}<br>${m.text}</p>`
    ).join("");
  }

  // ğŸµ éŸ³ä¹
  const songs = [
    "music/song1.mp3",
    "music/song2.mp3"
  ];
  let current = 0;
  const audio = document.getElementById("audio");

  function loadSong() {
    audio.src = songs[current];
    audio.play();
  }

  function togglePlay() {
    audio.paused ? audio.play() : audio.pause();
  }

  function nextSong() {
    current = (current + 1) % songs.length;
    loadSong();
  }

  function prevSong() {
    current = (current - 1 + songs.length) % songs.length;
    loadSong();
  }

  function setVolume(v) {
    audio.volume = v;
  }

  loadSong();
</script>

</body>
</html>
